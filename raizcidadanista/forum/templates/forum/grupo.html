{% extends 'forum/base.html' %}
{% load bootstrap %}

{% block title %}Tópicos: {{ object }} - Fórum - {% endblock %}
{% block ogtitle %}Tópicos: {{ object }} - Fórum - {% endblock %}

{% block description %}Tópicos: {{ object }} - Fórum - {% endblock %}
{% block ogdescription %}Tópicos: {{ object }} - Fórum - {% endblock %}

{% block main %}
    <div class="col-article">
        <h3>Fórum › Tópicos: {{ object }}<button type="submit" class="btn btn-success new-topic">Adicionar novo tópico</button></h3>

        <form id="form-new-topic" action="" method="POST" role="form">{% csrf_token %}
            <div class="panel panel-default">
                <div class="panel-body">
                    <h3>Novo tópico</h3>
                    {% for field in form %}
                        <div class="form-group{% if field.errors %} has-error has-feedback{% endif %} group-{{ field.name }}">
                            {% if field|btischeckbox %}
                                {{ field|btform }}
                                <label class="control-label label-{{ field.name }}" for="id_{{ field.name }}">{{ field.label }}{% if field.field.required %}*{% endif %}</label>
                            {% else %}
                                <label class="control-label label-{{ field.name }}" for="id_{{ field.name }}">{{ field.label }}{% if field.field.required %}*{% endif %}</label>
                                {{ field|btform }}
                            {% endif %}
                            {% if field.errors %}
                            <ul class="list-unstyled">
                            {% for error in field.errors %}
                              <li class="text-error"><small>{{ error }}</small></li>
                            {% endfor %}
                            </ul>
                            {% endif %}
                        </div>
                    {% endfor %}
                    <button type="submit" class="btn btn-success">Adicionar</button>
                </div>
            </div>
        </form>

        {{ object.descricao|safe }}

        {% for topico in topicos %}
        <a href="#">
            <blockquote>
              <h4>{{ topico }}</h4>
              <footer>Por: {% firstof topico.criador.first_name topico.criador.username %} - {{ topico.dt_criacao|date:"d/m/Y H:i" }}</footer>
            </blockquote>
        </a>
        {% endfor %}

        <nav>
          <ul class="pager">
            {% if topicos.has_previous %}
                <li class="previous"><a href="{{ topicos.previous_page_number }}"><span aria-hidden="true">&larr;</span> Anterior</a></li>
            {% endif %}

            {% if topicos.has_next %}
                <li class="next"><a href="{{ topicos.next_page_number }}">Próximo <span aria-hidden="true">&rarr;</span></a></li>
            {% endif %}
          </ul>
        </nav>
    </div>

{% endblock %}

{% block css %}
<style type="text/css">
    .new-topic {float: right;}
    #form-new-topic{display: none;}
</style>
{% endblock %}


{% block js %}
<script type="text/javascript">
    $('.new-topic').click(function(event) {
        $('#form-new-topic').slideToggle();
        return false;
    });
</script>
{% endblock %}